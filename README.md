## 基于 OSPF 协议的拓扑结构详解

### 概述

本拓扑结构采用两个路由器、三个交换机和多台计算机组成一个典型的双路由器互联网络，并使用 OSPF 协议进行路由。

### 设备配置

#### 路由器 1

*   **IP 地址：** 100.0.0.1/24
*   **网段：** 100.0.0.0/24
*   **接口：**
    *   `Gi0/0/0`：连接交换机 1
        *   IP 地址：100.0.0.2/24
    *   `Gi0/0/1`：连接路由器 2
        *   IP 地址：150.0.0.1/24

#### 路由器 2

*   **IP 地址：** 150.0.0.2/24
*   **网段：** 150.0.0.0/24
*   **接口：**
    *   `Gi0/0/0`：连接交换机 2
        *   IP 地址：150.0.0.3/24
    *   `Gi0/0/1`：连接路由器 1
        *   IP 地址：100.0.0.1/24

#### 交换机 1

*   连接路由器 1 的 Gi0/0/0 接口和 PC1、PC2 计算机

#### 交换机 2

*   连接路由器 2 的 Gi0/0/0 接口和 PC3、PC4 计算机

#### PC1

*   IP 地址：192.168.1.1
*   网关：192.168.1.254

#### PC2

*   IP 地址：192.168.1.2
*   网关：192.168.1.254

#### PC3

*   IP 地址：192.168.2.1
*   网关：192.168.2.254

#### PC4

*   IP 地址：192.168.2.2
*   网关：192.168.2.254

### 工作原理

*   PC1 和 PC2 位于同一个网段 (192.168.1.0/24)，可以直接互相通信。
*   PC3 和 PC4 位于另一个网段 (192.168.2.0/24)，需要通过路由器 1 或路由器 2 进行路由才能互相通信。

当 PC1 要向 PC3 发送数据时，数据包会按照以下步骤进行传输：

1.  数据包会先发送到交换机 1。
2.  交换机 1 将数据包转发到路由器 1。
3.  路由器 1 会根据 OSPF 路由表将数据包转发到路由器 2。
4.  路由器 2 会根据 OSPF 路由表将数据包转发到交换机 2。
5.  交换机 2 会将数据包转发到 PC3。
